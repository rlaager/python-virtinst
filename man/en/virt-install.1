.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.07)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "VIRT-INSTALL 1"
.TH VIRT-INSTALL 1 "2009-12-03" "" "Virtual Machine Install Tools"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
virt\-install \- provision new virtual machines
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBvirt-install\fR [\s-1OPTION\s0]...
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBvirt-install\fR is a command line tool for provisioning new virtual machines
using the \f(CW\*(C`libvirt\*(C'\fR hypervisor management library. The tool supports both
text based & graphical installations, using serial console, \s-1SDL\s0 graphics
or a \s-1VNC\s0 client/server pair. The guest can be configured to use one or more
virtual disks, network interfaces, audio devices, and physical host devices
(\s-1USB\s0, \s-1PCI\s0).
.PP
The installation media can be held locally or remotely on \s-1NFS\s0, \s-1HTTP\s0, \s-1FTP\s0
servers. In the latter case \f(CW\*(C`virt\-install\*(C'\fR will fetch the minimal files
necessary to kick off the installation process, allowing the guest
to fetch the rest of the \s-1OS\s0 distribution as needed. \s-1PXE\s0 booting, and importing
an existing disk image (thus skipping the install phase) are also supported.
.PP
Given suitable command line arguments, \f(CW\*(C`virt\-install\*(C'\fR is capable of running
completely unattended, with the guest 'kickstarting' itself too. This allows
for easy automation of guest installs. An interactive mode is also available
with the \-\-prompt option, but this will only ask for the minimum required
options.
.SH "OPTIONS"
.IX Header "OPTIONS"
Most options are not required. Minimum requirements are \-\-name, \-\-ram,
guest storage (\-\-disk or \-\-nodisks), and an install option.
.IP "\-h, \-\-help" 2
.IX Item "-h, --help"
Show the help message and exit
.IP "\-\-connect=CONNECT" 2
.IX Item "--connect=CONNECT"
Connect to a non-default hypervisor. The default connection is chosen based
on the following rules:
.RS 2
.IP "xen" 4
.IX Item "xen"
If running on a host with the Xen kernel (checks against /proc/xen)
.IP "qemu:///system" 4
.IX Item "qemu:///system"
If running on a bare metal kernel as root (needed for \s-1KVM\s0 installs)
.IP "qemu:///session" 4
.IX Item "qemu:///session"
If running on a bare metal kernel as non-root
.Sp
It is only necessary to provide the \f(CW\*(C`\-\-connect\*(C'\fR argument if this default
prioritization is incorrect, eg if wanting to use \s-1QEMU\s0 while on a Xen kernel.
.RE
.RS 2
.RE
.Sh "General Options"
.IX Subsection "General Options"
General configuration parameters that apply to all types of guest installs.
.IP "\-n \s-1NAME\s0, \-\-name=NAME" 2
.IX Item "-n NAME, --name=NAME"
Name of the new guest virtual machine instance. This must be unique amongst
all guests known to the hypervisor on the connection, including those not
currently active. To re-define an existing guest, use the \f(CWvirsh(1)\fR tool
to shut it down ('virsh shutdown') & delete ('virsh undefine') it prior to
running \f(CW\*(C`virt\-install\*(C'\fR.
.IP "\-r \s-1MEMORY\s0, \-\-ram=MEMORY" 2
.IX Item "-r MEMORY, --ram=MEMORY"
Memory to allocate for guest instance in megabytes. If the hypervisor does
not have enough free memory, it is usual for it to automatically take memory
away from the host operating system to satisfy this allocation.
.IP "\-\-arch=ARCH" 2
.IX Item "--arch=ARCH"
Request a non-native \s-1CPU\s0 architecture for the guest virtual machine.
If omitted, the host \s-1CPU\s0 architecture will be used in the guest.
.IP "\-u \s-1UUID\s0, \-\-uuid=UUID" 2
.IX Item "-u UUID, --uuid=UUID"
\&\s-1UUID\s0 for the guest; if none is given a random \s-1UUID\s0 will be generated. If you
specify \s-1UUID\s0, you should use a 32\-digit hexadecimal number. \s-1UUID\s0 are intended
to be unique across the entire data center, and indeed world. Bear this in
mind if manually specifying a \s-1UUID\s0
.IP "\-\-vcpus=VCPUS" 2
.IX Item "--vcpus=VCPUS"
Number of virtual cpus to configure for the guest. Not all hypervisors support
\&\s-1SMP\s0 guests, in which case this argument will be silently ignored
.IP "\-\-check\-cpu" 2
.IX Item "--check-cpu"
Check that the number virtual cpus requested does not exceed physical CPUs and
warn if they do.
.IP "\-\-cpuset=CPUSET" 2
.IX Item "--cpuset=CPUSET"
Set which physical cpus the guest can use. \f(CW\*(C`CPUSET\*(C'\fR is a comma separated list of numbers, which can also be specified in ranges. Example:
.Sp
.Vb 2
\&    0,2,3,5     : Use processors 0,2,3 and 5
\&    1\-3,5,6\-8   : Use processors 1,2,3,5,6,7 and 8
.Ve
.Sp
If the value 'auto' is passed, virt-install attempts to automatically determine
an optimal cpu pinning using \s-1NUMA\s0 data, if available.
.IP "\-\-os\-type=OS_TYPE" 2
.IX Item "--os-type=OS_TYPE"
Optimize the guest configuration for a type of operating system (ex. 'linux',
\&'windows'). This will attempt to pick the most suitable \s-1ACPI\s0 & \s-1APIC\s0 settings,
optimally supported mouse drivers, virtio, and generally accommodate other
operating system quirks.
.Sp
By default, virt-install will attempt to auto detect this value from
the install media (currently only supported for \s-1URL\s0 installs). Autodetection
can be disabled with the special value 'none'
.Sp
See \f(CW\*(C`\-\-os\-variant\*(C'\fR for valid options.
.IP "\-\-os\-variant=OS_VARIANT" 2
.IX Item "--os-variant=OS_VARIANT"
Further optimize the guest configuration for a specific operating system
variant (ex. 'fedora8', 'winxp'). This parameter is optional, and does not
require an \f(CW\*(C`\-\-os\-type\*(C'\fR to be specified.
.Sp
By default, virt-install will attempt to auto detect this value from
the install media (currently only supported for \s-1URL\s0 installs). Autodetection
can be disabled with the special value 'none'.
.Sp
Valid values are:
.RS 2
.IP "linux" 4
.IX Item "linux"
.RS 4
.PD 0
.IP "debianetch" 4
.IX Item "debianetch"
.PD
Debian Etch
.IP "debianlenny" 4
.IX Item "debianlenny"
Debian Lenny
.IP "debiansqueeze" 4
.IX Item "debiansqueeze"
Debian Squeeze
.IP "fedora5" 4
.IX Item "fedora5"
Fedora Core 5
.IP "fedora6" 4
.IX Item "fedora6"
Fedora Core 6
.IP "fedora7" 4
.IX Item "fedora7"
Fedora 7
.IP "fedora8" 4
.IX Item "fedora8"
Fedora 8
.IP "fedora9" 4
.IX Item "fedora9"
Fedora 9
.IP "fedora10" 4
.IX Item "fedora10"
Fedora 10
.IP "fedora11" 4
.IX Item "fedora11"
Fedora 11
.IP "fedora12" 4
.IX Item "fedora12"
Fedora 12
.IP "fedora13" 4
.IX Item "fedora13"
Fedora 13
.IP "generic24" 4
.IX Item "generic24"
Generic 2.4.x kernel
.IP "generic26" 4
.IX Item "generic26"
Generic 2.6.x kernel
.IP "virtio26" 4
.IX Item "virtio26"
Generic 2.6.25 or later kernel with virtio
.IP "rhel2.1" 4
.IX Item "rhel2.1"
Red Hat Enterprise Linux 2.1
.IP "rhel3" 4
.IX Item "rhel3"
Red Hat Enterprise Linux 3
.IP "rhel4" 4
.IX Item "rhel4"
Red Hat Enterprise Linux 4
.IP "rhel5" 4
.IX Item "rhel5"
Red Hat Enterprise Linux 5
.IP "rhel5.4" 4
.IX Item "rhel5.4"
Red Hat Enterprise Linux 5.4 or later
.IP "rhel6" 4
.IX Item "rhel6"
Red Hat Enterprise Linux 6
.IP "sles10" 4
.IX Item "sles10"
Suse Linux Enterprise Server
.IP "sles11" 4
.IX Item "sles11"
Suse Linux Enterprise Server 11
.IP "ubuntuhardy" 4
.IX Item "ubuntuhardy"
Ubuntu 8.04 \s-1LTS\s0 (Hardy Heron)
.IP "ubuntuintrepid" 4
.IX Item "ubuntuintrepid"
Ubuntu 8.10 (Intrepid Ibex)
.IP "ubuntujaunty" 4
.IX Item "ubuntujaunty"
Ubuntu 9.04 (Jaunty Jackalope)
.IP "ubuntukarmic" 4
.IX Item "ubuntukarmic"
Ubuntu 9.10 (Karmic Koala)
.RE
.RS 4
.RE
.IP "other" 4
.IX Item "other"
.RS 4
.PD 0
.IP "generic" 4
.IX Item "generic"
.PD
Generic
.IP "msdos" 4
.IX Item "msdos"
MS-DOS
.IP "netware4" 4
.IX Item "netware4"
Novell Netware 4
.IP "netware5" 4
.IX Item "netware5"
Novell Netware 5
.IP "netware6" 4
.IX Item "netware6"
Novell Netware 6
.RE
.RS 4
.RE
.IP "solaris" 4
.IX Item "solaris"
.RS 4
.PD 0
.IP "opensolaris" 4
.IX Item "opensolaris"
.PD
Sun OpenSolaris
.IP "solaris10" 4
.IX Item "solaris10"
Sun Solaris 10
.IP "solaris9" 4
.IX Item "solaris9"
Sun Solaris 9
.RE
.RS 4
.RE
.IP "unix" 4
.IX Item "unix"
.RS 4
.PD 0
.IP "freebsd6" 4
.IX Item "freebsd6"
.PD
Free \s-1BSD\s0 6.x
.IP "freebsd7" 4
.IX Item "freebsd7"
Free \s-1BSD\s0 7.x
.IP "openbsd4" 4
.IX Item "openbsd4"
Open \s-1BSD\s0 4.x
.RE
.RS 4
.RE
.IP "windows" 4
.IX Item "windows"
.RS 4
.PD 0
.IP "vista" 4
.IX Item "vista"
.PD
Microsoft Windows Vista
.IP "win2k" 4
.IX Item "win2k"
Microsoft Windows 2000
.IP "win2k3" 4
.IX Item "win2k3"
Microsoft Windows 2003
.IP "win2k8" 4
.IX Item "win2k8"
Microsoft Windows 2008
.IP "win7" 4
.IX Item "win7"
Microsoft Windows 7
.IP "winxp" 4
.IX Item "winxp"
Microsoft Windows \s-1XP\s0 (x86)
.IP "winxp64" 4
.IX Item "winxp64"
Microsoft Windows \s-1XP\s0 (x86_64)
.RE
.RS 4
.RE
.IP "none" 4
.IX Item "none"
No \s-1OS\s0 version specified (disables autodetect)
.RE
.RS 2
.RE
.IP "\-\-host\-device=HOSTDEV" 2
.IX Item "--host-device=HOSTDEV"
Attach a physical host device to the guest. \s-1HOSTDEV\s0 is a node device name
as used by libvirt (as shown by 'virsh nodedev\-list').
.Sh "Full Virtualization specific options"
.IX Subsection "Full Virtualization specific options"
Parameters specific only to fully virtualized guest installs.
.IP "\-\-sound" 2
.IX Item "--sound"
Attach a virtual audio device to the guest.
.IP "\-\-parallel=CHAROPTS" 2
.IX Item "--parallel=CHAROPTS"
.PD 0
.IP "\-\-serial=CHAROPTS" 2
.IX Item "--serial=CHAROPTS"
.PD
Specifies a serial device to attach to the guest, with various options. The
general format of a serial string is
.Sp
.Vb 1
\&    \-\-serial type,opt1=val1,opt2=val2,...
.Ve
.Sp
\&\-\-serial and \-\-parallel devices share all the same options, unless otherwise
noted. Some of the types of character device redirection are:
.RS 2
.IP "\fB\-\-serial pty\fR" 4
.IX Item "--serial pty"
Psuedo \s-1TTY\s0. The allocated pty will be listed in the running guests \s-1XML\s0
description.
.IP "\fB\-\-serial dev,path=HOSTPATH\fR" 4
.IX Item "--serial dev,path=HOSTPATH"
Host device. For serial devices, this could be /dev/ttyS0. For parallel
devices, this could be /dev/parport0.
.IP "\fB\-\-serial file,path=FILENAME\fR" 4
.IX Item "--serial file,path=FILENAME"
Write output to \s-1FILENAME\s0.
.IP "\fB\-\-serial pipe,path=PIPEPATH\fR" 4
.IX Item "--serial pipe,path=PIPEPATH"
Named pipe (see \fIpipe\fR\|(7))
.IP "\fB\-\-serial tcp,host=HOST:PORT,mode=MODE,protocol=PROTOCOL\fR" 4
.IX Item "--serial tcp,host=HOST:PORT,mode=MODE,protocol=PROTOCOL"
\&\s-1TCP\s0 net console. \s-1MODE\s0 is either 'bind' (wait for connections on \s-1HOST:PORT\s0)
or 'connect' (send output to \s-1HOST:PORT\s0), default is 'connect'. \s-1HOST\s0 defaults
to '127.0.0.1', but \s-1PORT\s0 is required. \s-1PROTOCOL\s0 can be either 'raw' or 'telnet'
(default 'raw'). If 'telnet', the port acts like a telnet server or client.
Some examples:
.Sp
Connect to localhost, port 1234:
.Sp
\&\-\-serial tcp,host=:1234
.Sp
Wait for connections on any address, port 4567:
.Sp
\&\-\-serial tcp,host=0.0.0.0:4567,mode=bind
.Sp
Wait for telnet connection on localhost, port 2222. The user could then
connect interactively to this console via 'telnet localhost 2222':
.Sp
\&\-\-serial tcp,host=:2222,mode=bind,protocol=telnet
.IP "\fB\-\-serial udp,host=CONNECT_HOST:PORT,bind_port=BIND_HOST:BIND_PORT\fR" 4
.IX Item "--serial udp,host=CONNECT_HOST:PORT,bind_port=BIND_HOST:BIND_PORT"
\&\s-1UDP\s0 net console. \s-1HOST:PORT\s0 is the destination to send output to (default
\&\s-1HOST\s0 is '127.0.0.1', \s-1PORT\s0 is required. \s-1BIND_HOST:PORT\s0 is the optional local
address to bind to (default \s-1BIND_HOST\s0 is 127.0.0.1, but is only set if
\&\s-1BIND_PORT\s0 is specified.) Some examples:
.Sp
Send output to default syslog port (may need to edit /etc/rsyslog.conf
accordingly):
.Sp
\&\-\-serial udp,host=:514
.Sp
Send output to remote host 192.168.10.20, port 4444 (this output can be
read on the remote host using 'nc \-u \-l 4444':
.Sp
\&\-\-serial udp,host=192.168.10.20:4444
.IP "\fB\-\-serial unix,path=UNIXPATH,mode=MODE\fR" 4
.IX Item "--serial unix,path=UNIXPATH,mode=MODE"
Unix socket (see \fIunix\fR\|(7). \s-1MODE\s0 has similar behavior and defaults as 'tcp'.
.RE
.RS 2
.RE
.IP "\-\-noapic" 2
.IX Item "--noapic"
Override the \s-1OS\s0 type / variant to disables the \s-1APIC\s0 setting for fully
virtualized guest.
.IP "\-\-noacpi" 2
.IX Item "--noacpi"
Override the \s-1OS\s0 type / variant to disables the \s-1ACPI\s0 setting for fully
virtualized guest.
.Sh "Virtualization Type options"
.IX Subsection "Virtualization Type options"
Options to override the default virtualization type choices.
.IP "\-v, \-\-hvm" 2
.IX Item "-v, --hvm"
Request the use of full virtualization, if both para & full virtualization are
available on the host. This parameter may not be available if connecting to a
Xen hypervisor on a machine without hardware virtualization support. This
parameter is implied if connecting to a \s-1QEMU\s0 based hypervisor.
.IP "\-p, \-\-paravirt" 2
.IX Item "-p, --paravirt"
This guest should be a paravirtualized guest. If the host supports both
para & full virtualization, and neither this parameter nor the \f(CW\*(C`\-\-hvm\*(C'\fR
are specified, this will be assumed.
.IP "\-\-virt\-type" 2
.IX Item "--virt-type"
The hypervisor to install on. Example choices are kvm, qemu, xen, or kqemu.
Availabile options are listed via 'virsh capabilities' in the <domain> tags.
.IP "\-\-accelerate" 2
.IX Item "--accelerate"
Prefer \s-1KVM\s0 or \s-1KQEMU\s0 (in that order) if installing a \s-1QEMU\s0 guest. This behavior
is now the default, and this option is deprecated. To install a plain \s-1QEMU\s0
guest, use '\-\-virt\-type qemu'
.Sh "Installation Method options"
.IX Subsection "Installation Method options"
.IP "\-c \s-1CDROM\s0, \-\-cdrom=CDROM" 2
.IX Item "-c CDROM, --cdrom=CDROM"
File or device use as a virtual CD-ROM device for fully virtualized guests.
It can be path to an \s-1ISO\s0 image, or to a \s-1CDROM\s0 device. It can also be a \s-1URL\s0
from which to fetch/access a minimal boot \s-1ISO\s0 image. The URLs take the same
format as described for the \f(CW\*(C`\-\-location\*(C'\fR argument. If a cdrom has been
specified via the \f(CW\*(C`\-\-disk\*(C'\fR option, and neither \f(CW\*(C`\-\-cdrom\*(C'\fR nor any other
install option is specified, the \f(CW\*(C`\-\-disk\*(C'\fR cdrom is used as the install media.
.IP "\-l \s-1LOCATION\s0, \-\-location=LOCATION" 2
.IX Item "-l LOCATION, --location=LOCATION"
Installation source for guest virtual machine kernel+initrd pair.
The \f(CW\*(C`LOCATION\*(C'\fR can take one of the following forms:
.RS 2
.IP "\s-1DIRECTORY\s0" 4
.IX Item "DIRECTORY"
Path to a local directory containing an installable distribution image
.IP "nfs:host:/path or nfs://host/path" 4
.IX Item "nfs:host:/path or nfs://host/path"
An \s-1NFS\s0 server location containing an installable distribution image
.IP "http://host/path" 4
.IX Item "http://host/path"
An \s-1HTTP\s0 server location containing an installable distribution image
.IP "ftp://host/path" 4
.IX Item "ftp://host/path"
An \s-1FTP\s0 server location containing an installable distribution image
.RE
.RS 2
.Sp
Some distro specific url samples:
.IP "Fedora/Red Hat Based" 4
.IX Item "Fedora/Red Hat Based"
http://download.fedoraproject.org/pub/fedora/linux/releases/10/Fedora/i386/os/
.IP "Debian/Ubuntu" 4
.IX Item "Debian/Ubuntu"
http://ftp.us.debian.org/debian/dists/etch/main/installer\-amd64/
.IP "Suse" 4
.IX Item "Suse"
http://download.opensuse.org/distribution/11.0/repo/oss/
.IP "Mandriva" 4
.IX Item "Mandriva"
ftp://ftp.uwsg.indiana.edu/linux/mandrake/official/2009.0/i586/
.RE
.RS 2
.RE
.IP "\-\-pxe" 2
.IX Item "--pxe"
Use the \s-1PXE\s0 boot protocol to load the initial ramdisk and kernel for starting
the guest installation process.
.IP "\-\-import" 2
.IX Item "--import"
Skip the \s-1OS\s0 installation process, and build a guest around an existing
disk image. The device used for booting is the first device specified via
\&\f(CW\*(C`\-\-disk\*(C'\fR or \f(CW\*(C`\-\-file\*(C'\fR.
.IP "\-\-livecd" 2
.IX Item "--livecd"
Specify that the installation media is a live \s-1CD\s0 and thus the guest
needs to be configured to boot off the \s-1CDROM\s0 device permanently. It
may be desirable to also use the \f(CW\*(C`\-\-nodisks\*(C'\fR flag in combination.
.IP "\-x \s-1EXTRA\s0, \-\-extra\-args=EXTRA" 2
.IX Item "-x EXTRA, --extra-args=EXTRA"
Additional kernel command line arguments to pass to the installer when
performing a guest install from \f(CW\*(C`\-\-location\*(C'\fR.
.Sh "Storage Configuration"
.IX Subsection "Storage Configuration"
.IP "\-\-disk=DISKOPTS" 2
.IX Item "--disk=DISKOPTS"
Specifies media to use as storage for the guest, with various options. The
general format of a disk string is
.Sp
.Vb 1
\&    \-\-disk opt1=val1,opt2=val2,...
.Ve
.Sp
To specify media, the command can either be:
.Sp
.Vb 1
\&    \-\-disk /some/storage/path,opt1=val1
.Ve
.Sp
or explicitly specify one of the following arguments:
.RS 2
.IP "\fBpath\fR" 4
.IX Item "path"
A path to some storage media to use, existing or not. Existing media can be
a file or block device. If installing on a remote host, the existing media
must be shared as a libvirt storage volume.
.Sp
Specifying a non-existent path implies attempting to create the new storage,
and will require specifyng a 'size' value. If the base directory of the path
is a libvirt storage pool on the host, the new storage will be created as a
libvirt storage volume. For remote hosts, the base directory is required to be
a storage pool if using this method.
.IP "\fBpool\fR" 4
.IX Item "pool"
An existing libvirt storage pool name to create new storage on. Requires
specifying a 'size' value.
.IP "\fBvol\fR" 4
.IX Item "vol"
An existing libvirt storage volume to use. This is specified as
\&'poolname/volname'.
.RE
.RS 2
.Sp
Other available options:
.IP "\fBdevice\fR" 4
.IX Item "device"
Disk device type. Value can be 'cdrom', 'disk', or 'floppy'. Default is
\&'disk'. If a 'cdrom' is specified, and no install method is chosen, the
cdrom is used as the install media.
.IP "\fBbus\fR" 4
.IX Item "bus"
Disk bus type. Value can be 'ide', 'scsi', 'usb', 'virtio' or 'xen'.  The
default is hypervisor dependent since not all hypervisors support all bus
types.
.IP "\fBperms\fR" 4
.IX Item "perms"
Disk permissions. Value can be 'rw' (Read/Write), 'ro' (Readonly),
or 'sh' (Shared Read/Write). Default is 'rw'
.IP "\fBsize\fR" 4
.IX Item "size"
size (in \s-1GB\s0) to use if creating new storage
.IP "\fBsparse\fR" 4
.IX Item "sparse"
whether to skip fully allocating newly created storage. Value is 'true' or
\&'false'. Default is 'true' (do not fully allocate).
.Sp
The initial time taken to fully-allocate the guest virtual disk (spare=false)
will be usually by balanced by faster install times inside the guest. Thus
use of this option is recommended to ensure consistently high performance
and to avoid I/O errors in the guest should the host filesystem fill up.
.IP "\fBcache\fR" 4
.IX Item "cache"
The cache mode to be used. The host pagecache provides cache memory.
The cache value can be 'none', 'writethrough', or 'writeback'.
\&'writethrough' provides read caching. 'writeback' provides
read and write caching.
.IP "\fBformat\fR" 4
.IX Item "format"
Image format to be used if creating managed storage. For file volumes, this
can be 'raw', 'qcow2', 'vmdk', etc. See format types in
<http://libvirt.org/storage.html> for possible values.
.RE
.RS 2
.Sp
See the examples section for some uses. This option deprecates \f(CW\*(C`\-\-file\*(C'\fR,
\&\f(CW\*(C`\-\-file\-size\*(C'\fR, and \f(CW\*(C`\-\-nonsparse\*(C'\fR.
.RE
.IP "\-\-nodisks" 2
.IX Item "--nodisks"
Request a virtual machine without any local disk storage, typically used for
running 'Live \s-1CD\s0' images or installing to network storage (iSCSI or \s-1NFS\s0 root).
.IP "\-f \s-1DISKFILE\s0, \-\-file=DISKFILE" 2
.IX Item "-f DISKFILE, --file=DISKFILE"
This option is deprecated in favor of \f(CW\*(C`\-\-disk path=DISKFILE\*(C'\fR.
.IP "\-s \s-1DISKSIZE\s0, \-\-file\-size=DISKSIZE" 2
.IX Item "-s DISKSIZE, --file-size=DISKSIZE"
This option is deprecated in favor of \f(CW\*(C`\-\-disk ...,size=DISKSIZE,...\*(C'\fR
.IP "\-\-nonsparse" 2
.IX Item "--nonsparse"
This option is deprecated in favor of \f(CW\*(C`\-\-disk ...,sparse=false,...\*(C'\fR
.Sh "Networking Configuration"
.IX Subsection "Networking Configuration"
.IP "\-w \s-1NETWORK\s0, \-\-network=NETWORK,opt1=val1,opt2=val2" 2
.IX Item "-w NETWORK, --network=NETWORK,opt1=val1,opt2=val2"
Connect the guest to the host network. The value for \f(CW\*(C`NETWORK\*(C'\fR can take
one of 3 formats:
.RS 2
.IP "bridge=BRIDGE" 4
.IX Item "bridge=BRIDGE"
Connect to a bridge device in the host called \f(CW\*(C`BRIDGE\*(C'\fR. Use this option if
the host has static networking config & the guest requires full outbound
and inbound connectivity  to/from the \s-1LAN\s0. Also use this if live migration
will be used with this guest.
.IP "network=NAME" 4
.IX Item "network=NAME"
Connect to a virtual network in the host called \f(CW\*(C`NAME\*(C'\fR. Virtual networks
can be listed, created, deleted using the \f(CW\*(C`virsh\*(C'\fR command line tool. In
an unmodified install of \f(CW\*(C`libvirt\*(C'\fR there is usually a virtual network
with a name of \f(CW\*(C`default\*(C'\fR. Use a virtual network if the host has dynamic
networking (eg NetworkManager), or using wireless. The guest will be 
NATed to the \s-1LAN\s0 by whichever connection is active.
.IP "user" 4
.IX Item "user"
Connect to the \s-1LAN\s0 using \s-1SLIRP\s0. Only use this if running a \s-1QEMU\s0 guest as
an unprivileged user. This provides a very limited form of \s-1NAT\s0.
.RE
.RS 2
.Sp
If this option is omitted a single \s-1NIC\s0 will be created in the guest. If
there is a bridge device in the host with a physical interface enslaved,
that will be used for connectivity. Failing that, the virtual network
called \f(CW\*(C`default\*(C'\fR will be used. This option can be specified multiple
times to setup more than one \s-1NIC\s0.
.Sp
Other available options are:
.IP "\fBmodel\fR" 4
.IX Item "model"
Network device model as seen by the guest. Value can be any nic model supported
by the hypervisor, e.g.: 'e1000', 'rtl8139', 'virtio', ...
.IP "\fBmac\fR" 4
.IX Item "mac"
Fixed \s-1MAC\s0 address for the guest; If this parameter is omitted, or the value
\&\f(CW\*(C`RANDOM\*(C'\fR is specified a suitable address will be randomly generated. For
Xen virtual machines it is required that the first 3 pairs in the \s-1MAC\s0 address
be the sequence '00:16:3e', while for \s-1QEMU\s0 or \s-1KVM\s0 virtual machines it must
be '52:54:00'.
.RE
.RS 2
.RE
.IP "\-\-nonetworks" 2
.IX Item "--nonetworks"
Request a virtual machine without any network interfaces.
.IP "\-b \s-1BRIDGE\s0, \-\-bridge=BRIDGE" 2
.IX Item "-b BRIDGE, --bridge=BRIDGE"
This parameter is deprecated in favour of
\&\f(CW\*(C`\-\-network bridge=bridge_name\*(C'\fR.
.IP "\-m \s-1MAC\s0, \-\-mac=MAC" 2
.IX Item "-m MAC, --mac=MAC"
This parameter is deprecated in favour of \f(CW\*(C`\-\-network NETWORK,mac=12:34...\*(C'\fR
.Sh "Graphics Configuration"
.IX Subsection "Graphics Configuration"
If no graphics option is specified, \f(CW\*(C`virt\-install\*(C'\fR will default to \-\-vnc
if the \s-1DISPLAY\s0 environment variable is set, otherwise \-\-nographics is used.
.IP "\-\-vnc" 2
.IX Item "--vnc"
Setup a virtual console in the guest and export it as a \s-1VNC\s0 server in
the host. Unless the \f(CW\*(C`\-\-vncport\*(C'\fR parameter is also provided, the \s-1VNC\s0
server will run on the first free port number at 5900 or above. The
actual \s-1VNC\s0 display allocated can be obtained using the \f(CW\*(C`vncdisplay\*(C'\fR
command to \f(CW\*(C`virsh\*(C'\fR (or \fIvirt\-viewer\fR\|(1) can be used which handles this
detail for the use).
.IP "\-\-vncport=VNCPORT" 2
.IX Item "--vncport=VNCPORT"
Request a permanent, statically assigned port number for the guest \s-1VNC\s0
console. Use of this option is discouraged as other guests may automatically
choose to run on this port causing a clash.
.IP "\-\-vnclisten=VNCLISTEN" 2
.IX Item "--vnclisten=VNCLISTEN"
Address to listen on for \s-1VNC\s0 connections. Default is typically 127.0.0.1
(localhost only), but some hypervisors allow changing this globally (for
example, the qemu driver default can be changed in /etc/libvirt/qemu.conf).
Use 0.0.0.0 to allow access from other machines.
.IP "\-k \s-1KEYMAP\s0, \-\-keymap=KEYMAP" 2
.IX Item "-k KEYMAP, --keymap=KEYMAP"
Request that the virtual \s-1VNC\s0 console be configured to run with a specific
keyboard layout. If the special value 'local' is specified, virt-install
will attempt to configure to use the same keymap as the local system. A value
of 'none' specifically defers to the hypervisor. Default behavior is
hypervisor specific, but typically is the same as 'local'.
.IP "\-\-sdl" 2
.IX Item "--sdl"
Setup a virtual console in the guest and display an \s-1SDL\s0 window in the
host to render the output. If the \s-1SDL\s0 window is closed the guest may
be unconditionally terminated.
.IP "\-\-video=VIDEO" 2
.IX Item "--video=VIDEO"
Specify what video device model will be attached to the guest. Valid values
for \s-1VIDEO\s0 are hypervisor specific, but some options for recent kvm are
cirrus, vga, or vmvga (vmware).
.IP "\-\-nographics" 2
.IX Item "--nographics"
No graphical console will be allocated for the guest. Fully virtualized guests
(Xen \s-1FV\s0 or QEmu/KVM) will need to have a text console configured on the first
serial port in the guest (this can be done via the \-\-extra\-args option). Xen
\&\s-1PV\s0 will set this up automatically. The command 'virsh console \s-1NAME\s0' can be
used to connect to the serial device.
.IP "\-\-noautoconsole" 2
.IX Item "--noautoconsole"
Don't automatically try to connect to the guest console. The default behaviour
is to launch a \s-1VNC\s0 client to display the graphical console, or to run the
\&\f(CW\*(C`virsh\*(C'\fR \f(CW\*(C`console\*(C'\fR command to display the text console. Use of this parameter
will disable this behaviour.
.Sh "Miscellaneous Options"
.IX Subsection "Miscellaneous Options"
.IP "\-d, \-\-debug" 2
.IX Item "-d, --debug"
Print debugging information to the terminal when running the install process.
The debugging information is also stored in \f(CW\*(C`$HOME/.virtinst/virt\-install.log\*(C'\fR
even if this parameter is omitted.
.IP "\-\-noreboot" 2
.IX Item "--noreboot"
Prevent the domain from automatically rebooting after the install has
completed.
.IP "\-\-wait=WAIT" 2
.IX Item "--wait=WAIT"
Amount of time to wait (in minutes) for a \s-1VM\s0 to complete its install.
Without this option, virt-install will wait for the console to close (not
neccessarily indicating the guest has shutdown), or in the case of
\&\-\-noautoconsole, simply kick off the install and exit. Any negative
value will make virt-install wait indefinitely, a value of 0 triggers the
same results as noautoconsole. If the time limit is exceeded, virt-install
simply exits, leaving the virtual machine in its current state.
.IP "\-\-force" 2
.IX Item "--force"
Prevent interactive prompts. If the intended prompt was a yes/no prompt, always
say yes. For any other prompts, the application will exit.
.IP "\-\-prompt" 2
.IX Item "--prompt"
Specifically enable prompting for required information. Default prompting
is off (as of virtinst 0.400.0)
.SH "EXAMPLES"
.IX Header "EXAMPLES"
Install a \s-1KVM\s0 guest (assuming proper host support), creating a new
+storage file, virtual networking, booting from the host \s-1CDROM\s0, using
+VNC server/viewer.
.PP
.Vb 8
\&  # virt\-install \e
\&       \-\-connect qemu:///system \e
\&       \-\-name demo \e
\&       \-\-ram 500 \e
\&       \-\-disk path=/var/lib/libvirt/images/demo.img,size=5 \e
\&       \-\-network network=default,model=virtio \e
\&       \-\-vnc \e
\&       \-\-cdrom /dev/cdrom
.Ve
.PP
Install a Fedora 9 plain \s-1QEMU\s0 guest, using \s-1LVM\s0 partition, virtual networking,
booting from \s-1PXE\s0, using \s-1VNC\s0 server/viewer
.PP
.Vb 9
\&  # virt\-install \e
\&       \-\-connect qemu:///system \e
\&       \-\-name demo \e
\&       \-\-ram 500 \e
\&       \-\-disk path=/dev/HostVG/DemoVM \e
\&       \-\-network network=default \e
\&       \-\-virt\-type qemu
\&       \-\-vnc \e
\&       \-\-os\-variant fedora9
.Ve
.PP
Install a guest with a real partition, with the default \s-1QEMU\s0 hypervisor for
a different architecture using \s-1SDL\s0 graphics, using a remote kernel and initrd
pair:
.PP
.Vb 9
\&  # virt\-install \e
\&       \-\-connect qemu:///system \e
\&       \-\-name demo \e
\&       \-\-ram 500 \e
\&       \-\-disk path=/dev/hdc \e
\&       \-\-network bridge=eth1 \e
\&       \-\-arch ppc64 \e
\&       \-\-sdl \e
\&       \-\-location http://download.fedora.redhat.com/pub/fedora/linux/core/6/x86_64/os/
.Ve
.PP
Run a Live \s-1CD\s0 image under Xen fullyvirt, in diskless environment
.PP
.Vb 8
\&  # virt\-install \e
\&       \-\-hvm \e
\&       \-\-name demo \e
\&       \-\-ram 500 \e
\&       \-\-nodisks \e
\&       \-\-livecd \e
\&       \-\-vnc \e
\&       \-\-cdrom /root/fedora7live.iso
.Ve
.PP
Install a paravirtualized Xen guest, 500 \s-1MB\s0 of \s-1RAM\s0, a 5 \s-1GB\s0 of disk, and
Fedora Core 6 from a web server, in text-only mode, with old style \-\-file
options:
.PP
.Vb 8
\&  # virt\-install \e
\&       \-\-paravirt \e
\&       \-\-name demo \e
\&       \-\-ram 500 \e
\&       \-\-file /var/lib/xen/images/demo.img \e
\&       \-\-file\-size 6 \e
\&       \-\-nographics \e
\&       \-\-location http://download.fedora.redhat.com/pub/fedora/linux/core/6/x86_64/os/
.Ve
.PP
Create a guest from an existing disk image 'mydisk.img' using defaults for
the rest of the options.
.PP
.Vb 5
\&  # virt\-install \e
\&       \-\-name demo
\&       \-\-ram 512
\&       \-\-disk /home/user/VMs/mydisk.img
\&       \-\-import
.Ve
.SH "AUTHORS"
.IX Header "AUTHORS"
Written by Daniel P. Berrange, Hugh Brock, Jeremy Katz, Cole Robinson and a
team of many other contributors. See the \s-1AUTHORS\s0 file in the source
distribution for the complete list of credits.
.SH "BUGS"
.IX Header "BUGS"
Please see http://virt\-manager.org/page/BugReporting
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (C) 2006\-2009 Red Hat, Inc, and various contributors.
This is free software. You may redistribute copies of it under the terms of
the \s-1GNU\s0 General Public License \f(CW\*(C`http://www.gnu.org/licenses/gpl.html\*(C'\fR. There
is \s-1NO\s0 \s-1WARRANTY\s0, to the extent permitted by law.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\f(CWvirsh(1)\fR, \f(CW\*(C`virt\-clone(1)\*(C'\fR, \f(CW\*(C`virt\-manager(1)\*(C'\fR, the project website \f(CW\*(C`http://virt\-manager.org\*(C'\fR
